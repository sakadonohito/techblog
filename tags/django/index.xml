<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Django on 開発メモてきな</title>
    <link>http://tech.k-zak.com/tags/django/index.xml</link>
    <description>Recent content in Django on 開発メモてきな</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <atom:link href="http://tech.k-zak.com/tags/django/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Django お勉強 Part3</title>
      <link>http://tech.k-zak.com/memo.html</link>
      <pubDate>Thu, 21 Apr 2011 08:43:01 +0000</pubDate>
      
      <guid>http://tech.k-zak.com/memo.html</guid>
      <description>&lt;div&gt;
  引き続きDjangoのお勉強。今回はDjango Projectのチュートリアルであばば。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  参考：&lt;a href=&#34;http://djangoproject.jp/doc/ja/1.0/intro/tutorial01.html#intro-tutorial01&#34;&gt;http://djangoproject.jp/doc/ja/1.0/intro/tutorial01.html#intro-tutorial01&lt;/a&gt;
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  最後の方まで順調だったのですが、最後の汎用ビューでつまりました。
&lt;/div&gt;

&lt;div&gt;
  同じようなところで詰まって、解決された方のブログを見つけたので、
&lt;/div&gt;

&lt;div&gt;
  それを参考に解決しました。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;p&gt;参考：&lt;a href=&#34;http://ntm.ex-blog.net/archives/91&#34;&gt;http://ntm.ex-blog.net/archives/91&lt;/a&gt;&lt;/p&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  よくあることですが、チュートリアルそのままやってても、説明不足の箇所が
&lt;/div&gt;

&lt;div&gt;
  あって、それが原因でうまく動作しなくあるっていうやつです。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  １，汎用ビューを使う設定したら、該当テンプレートファイルの名称を
&lt;/div&gt;

&lt;div&gt;
  　　規則に沿った名前にしないといけない。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  ２，チュートリアルの通りにコードを編集すると、今まで「poll」という名の
&lt;/div&gt;

&lt;div&gt;
  　　オブジェクトだった箇所を「object」という名前に編集しないといけない。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  解決した後から再度チュートリアルを読むと、説明不足というよりは、
&lt;/div&gt;

&lt;div&gt;
  翻訳の関係で分かり難い文章になってしまっている。という感じ。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  確かにどこを変えないといけないか書いてあるといえば書いてあるのですが、
&lt;/div&gt;

&lt;div&gt;
  自分みたいなアホウは良く解らんでした(つまりどこをどう編集すべきなのか
&lt;/div&gt;

&lt;div&gt;
  理解できなかった)。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  日本語って難しいですね。。。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Django お勉強 Part2</title>
      <link>http://tech.k-zak.com/django_part2.html</link>
      <pubDate>Wed, 20 Apr 2011 11:20:34 +0000</pubDate>
      
      <guid>http://tech.k-zak.com/django_part2.html</guid>
      <description>&lt;div&gt;
  古いDBMagazineに載ってたDjangoのチュートリアル的なものを
&lt;/div&gt;

&lt;div&gt;
  試してみたら、また詰まった。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  正しいかどうかは別にして解決したメモ
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  症状：見本通りにコード書いたらエラー出た。(reverse関数)
&lt;/div&gt;

&lt;div&gt;
  views.pyファイルの◯◯メソッドのreturnにDjango組込みのreverse関数
&lt;/div&gt;

&lt;div&gt;
  を使って、画面遷移させようとした。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  雑誌の通りにコーディングしたら、エラーが出た。
&lt;/div&gt;

&lt;div&gt;
  意訳：&lt;strong&gt;その関数の引数argsはシーケンスじゃないと駄目だぜ、おまいの&lt;/strong&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;strong&gt;            は&lt;/strong&gt;&lt;strong&gt;longだぜ。&lt;/strong&gt;
&lt;/div&gt;

&lt;div&gt;
  最初、どう書いたかというと、
&lt;/div&gt;

&lt;div&gt;
  &lt;span style=&#34;font-size: 0.8em;&#34;&gt;return HttpResponseRedirect(reverse(&amp;#8216;enkai.enkai_app.views.detail&amp;#8217;,args=&lt;strong&gt;&lt;span style=&#34;font-size: 1.25em;&#34;&gt;(e.id)&lt;/span&gt;&lt;/strong&gt;))&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  はて？と思い、引数の値を固定値にしてみた
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-size: medium;&#34;&gt;&lt;span style=&#34;font-size: 0.8em;&#34;&gt;return HttpResponseRedirect(reverse(&amp;#8216;enkai.enkai_app.views.detail&amp;#8217;,args=&lt;strong&gt;&lt;span style=&#34;font-size: 1.25em;&#34;&gt;(1)&lt;/span&gt;&lt;/strong&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;そしたら今度は「&lt;strong&gt;おまいのはintだぜ&lt;/strong&gt;」ってエラーになった。&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;&lt;br /&gt; &lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;これは引数に与えるデータ型が問題なのだと考え至ったがpython初心者&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;の&lt;/span&gt;自分はエラーメッセージ中の「&lt;strong&gt;シーケンス&lt;/strong&gt;」の意味を理解していなか
&lt;/div&gt;

&lt;div&gt;
  った。
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;&lt;br /&gt; &lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;次に固定値で与えてる引数を文字列として与えてみた。&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-size: medium;&#34;&gt;&lt;span style=&#34;font-size: 0.8em;&#34;&gt;return HttpResponseRedirect(reverse(&amp;#8216;enkai.enkai_app.views.detail&amp;#8217;,args=&lt;strong&gt;(&amp;#8216;1&amp;#8217;)&lt;/strong&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;これは成功しました。でも、ここで、「じゃあ、e.idを渡したい時はど&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;うすんの&lt;/span&gt;さ」と沈黙。。。
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;&lt;br /&gt; &lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-family: Arial; font-size: medium;&#34;&gt;んでgoogle先生に「ptython sequence」とかで訪ねて解決、最終的に&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span class=&#34;Apple-style-span&#34; style=&#34;color: #000000; font-size: medium;&#34;&gt;&lt;span style=&#34;font-size: 0.8em;&#34;&gt;return HttpResponseRedirect(reverse(&amp;#8216;enkai.enkai_app.views.detail&amp;#8217;,args=&lt;strong&gt;&lt;span style=&#34;font-size: 1.25em;&#34;&gt;[e.id]&lt;/span&gt;&lt;/strong&gt;))&lt;/span&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  と、「&lt;strong&gt;( )タプル？&lt;/strong&gt;」だったところを「&lt;strong&gt;[ ]リスト&lt;/strong&gt;」に変えたら意図する動
&lt;/div&gt;

&lt;div&gt;
  きをするようになりました。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  あとで軽く調べたところ、&lt;strong&gt;シーケンス&lt;/strong&gt;型というのがありその下位に&lt;strong&gt;リス&lt;/strong&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;strong&gt;ト&lt;/strong&gt;や&lt;strong&gt;タプル&lt;/strong&gt;、&lt;strong&gt;文字列&lt;/strong&gt;というデータ型があるそうです。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  あれ？リストと文字列がOKでタプルが駄目ってどういう事？と思ったら
&lt;/div&gt;

&lt;div&gt;
  要素が１つしかないタプル型の場合は必ず&lt;strong&gt;(e.id,)&lt;/strong&gt;とカンマを最後にいれて
&lt;/div&gt;

&lt;div&gt;
  おかないと&lt;strong&gt;イケナイ&lt;/strong&gt;ようです。最後のカンマがない場合は計算式の普通
&lt;/div&gt;

&lt;div&gt;
  の括弧と認識されてしまうようです。だからlongだのintだのと怒られた
&lt;/div&gt;

&lt;div&gt;
  訳ですね。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  試しにコードを再度編集して
&lt;/div&gt;

&lt;div&gt;
  &lt;span style=&#34;font-size: 0.8em;&#34;&gt;return HttpResponseRedirect(reverse(&amp;#8216;enkai.enkai_app.views.detail&amp;#8217;,args=&lt;strong&gt;&lt;span style=&#34;font-size: 1.25em;&#34;&gt;(e.id,)&lt;/span&gt;&lt;/strong&gt;))&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  で、試したところ、ちゃんと動きました。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  めでたしめでたし。。
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Django お勉強</title>
      <link>http://tech.k-zak.com/django.html</link>
      <pubDate>Tue, 19 Apr 2011 05:10:17 +0000</pubDate>
      
      <guid>http://tech.k-zak.com/django.html</guid>
      <description>&lt;p&gt;PythonのDjangoのお勉強記録&lt;/p&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  いろいろとつまったのでメモ。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  まず試したのはCodoZineのチュートリアル記事
&lt;/div&gt;

&lt;div&gt;
  Djangoチュートリアル前篇：　&lt;a href=&#34;http://codezine.jp/article/detail/4065&#34;&gt;http://codezine.jp/article/detail/4065&lt;/a&gt;
&lt;/div&gt;

&lt;div&gt;
  Djangoチュートリアル後編：　&lt;a href=&#34;http://codezine.jp/article/detail/4264&#34;&gt;http://codezine.jp/article/detail/4264&lt;/a&gt;
&lt;/div&gt;

&lt;div&gt;
  ※記事内のインストールや参考記事のURLは割愛
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  ０，環境はMacOSX10.6 Pythonはインストール済み
&lt;/div&gt;

&lt;div&gt;
  １，チュートリアルにしたがってDjangoインストール→プロジェクト作成、MySQLにDB作成
&lt;/div&gt;

&lt;div&gt;
  　　→アプリケーション作成
&lt;/div&gt;

&lt;div&gt;
  　　チュートリアルではDBはSQLiteだったけど、なんとなくMySQLを使った
&lt;/div&gt;

&lt;div&gt;
  ２，チュートリアルにしたがって写経
&lt;/div&gt;

&lt;div&gt;
  以上。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  時折詰まったので、後はそのポイント
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span style=&#34;font-size: 1.25em;&#34;&gt;&lt;strong&gt;・Pythonの文法にうっかりハマる。&lt;/strong&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  　自動でインデントしてくれるエディタを使っていると、改行時に自動でインデントしてくれますよね
&lt;/div&gt;

&lt;div&gt;
  　それを忘れて、別のメソッドを続けて書く時にはインデント位置を戻さないといけないのに、
&lt;/div&gt;

&lt;div&gt;
  　うっかりインデントされたままコード書き続けて、自爆するので気をつけましょう
&lt;/div&gt;

&lt;div&gt;
  　views.pyで定義したはずのものが(ビューメソッド？)見つからないエラーが出たら真っ先に
&lt;/div&gt;

&lt;div&gt;
  　インデントや誤字を疑いましょう。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;strong&gt;&lt;span style=&#34;font-size: 1.25em;&#34;&gt;・動作するのに必要な記述の説明が抜けている。追加ファイルの事。&lt;/span&gt;&lt;/strong&gt;
&lt;/div&gt;

&lt;div&gt;
  　当たり前の事といえばそれまでなのですが、views.pyで扱うクラスやメソッドを別ファイルで
&lt;/div&gt;

&lt;div&gt;
  　定義している場合、ちゃんとimport文を追加してあげないとエラーになります。
&lt;/div&gt;

&lt;div&gt;
  　models.pyについてはちゃんと記述がありますが、後から追加するforms.pyやcart.pyで追加した
&lt;/div&gt;

&lt;div&gt;
  　クラスを扱うので当然それのimport文を記述すべきなのですが、当たり前すぎるからか説明に
&lt;/div&gt;

&lt;div&gt;
  　ありませんでした。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  　まぁJavaなんかでも別クラスを扱う時にimport ◯◯ってやるじゃないですか、なんでそんな
&lt;/div&gt;

&lt;div&gt;
  　当たり前の事忘れてたんだろ。。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span style=&#34;font-size: 1.25em;&#34;&gt;&lt;strong&gt;・動作するのに必要な記述の説明が抜けている。direct_to_templateの事。&lt;/strong&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  　チュートリアルの途中から(といっても序盤から)viewメソッドがreturnする値を
&lt;/div&gt;

&lt;div&gt;
  　「direct_to_template」を使うようになります。使い方の記述はあるのですが、
&lt;/div&gt;

&lt;div&gt;
  　それを使えるようにするための必要なimport文の説明が抜けてました。views.pyの上の方に
&lt;/div&gt;

&lt;div&gt;
     from django.views.generic.simple import direct_to_template
&lt;/div&gt;

&lt;div&gt;
    の記述が必要でした。Django組込みのメソッドなら書かなくても動くように作って欲しいものです。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  　参考ブログ：&lt;a href=&#34;http://d.hatena.ne.jp/atasatamatara/20110303/1299120118&#34;&gt;http://d.hatena.ne.jp/atasatamatara/20110303/1299120118&lt;/a&gt;
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;span style=&#34;font-size: 1.25em;&#34;&gt;&lt;strong&gt;・CSRFエラー？警告が出る&lt;/strong&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;div&gt;
  　チュートリアルに従って、POST送信するフォームつくって動かしたら、「CSRF対策しろ！」
&lt;/div&gt;

&lt;div&gt;
  　っていうエラー画面になった。。。
&lt;/div&gt;

&lt;div&gt;
  　これはバージョンのせいかもしれない。setting.pyに以下を追記して解決。
&lt;/div&gt;

&lt;div&gt;
  　django.contrib.csrf.middleware.CsrfMiddleware
&lt;/div&gt;

&lt;div&gt;
  　記述場所は「MIDDLEWARE_CLASSES」のところで、sessionよりも上に書かないといけない
&lt;/div&gt;

&lt;div&gt;
  　らしい。。。元々そっくりなものはファイルに記述されていたが、内容が微妙に違うのと、
&lt;/div&gt;

&lt;div&gt;
  　記述されている位置がsessionの下になっていた。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  　参考記事：&lt;a href=&#34;http://djangoproject.jp/doc/ja/1.0/ref/contrib/csrf.html&#34;&gt;http://djangoproject.jp/doc/ja/1.0/ref/contrib/csrf.html&lt;/a&gt;
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  てか、最初っからDjangoプロジェクトの方やればよかったんじゃ。。。
&lt;/div&gt;

&lt;div&gt;
  次はDjangoプロジェクトにあるチュートリアルをやってみます　^ ^;)
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  &lt;strong&gt;素人目から見たDjangoの感想：&lt;/strong&gt;
&lt;/div&gt;

&lt;div&gt;
  CakePHPやRuby on RailsのMVCとちょっと違う。
&lt;/div&gt;

&lt;div&gt;
  ・urls.pyがRequestからviews.pyのどのメソッドを呼ぶが処理する→roots.rbみたいな。Javaだと
&lt;/div&gt;

&lt;div&gt;
  　xmlでうじゃうじゃ書くパート。
&lt;/div&gt;

&lt;div&gt;
  ・呼び出されたviews.pyの該当メソッドがデータ取得したり加工したりしてResponseの
&lt;/div&gt;

&lt;div&gt;
  　画面呼び出す。→名前「view」だけど、やってる事はコントローラーっぽい。
&lt;/div&gt;

&lt;div&gt;
  ・models.pyはまぁCakePHPやRoRと同じっぽいですね(今回まともに触ってないから分からない)。
&lt;/div&gt;

&lt;div&gt;
  ・テンプレートってのが他のフレームワークで言うところのViewっぽかった。
&lt;/div&gt;

&lt;div&gt;
  ・urls.pyに正規表現で呼び出しパターン全てを記述しないといけないのかー。はぁ。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  Djangoについての新し目(2010年1月以降)の書籍が無いので、ちっちゃいチュートリアルしかない。
&lt;/div&gt;

&lt;div&gt;
  →本が無いと悲観するのは、一貫した大きい情報の塊が欲しいから。
&lt;/div&gt;

&lt;div&gt;
&lt;/div&gt;

&lt;div&gt;
  まとまらないのは、知識と経験が足りないから。
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>